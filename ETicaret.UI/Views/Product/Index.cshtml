@model IEnumerable<Product>

@{
    Layout = "~/Views/Shared/_IndexLayout.cshtml";
}

<h1>Haberlerim</h1>
<table class="table table-bordered">
    <tr>
        <th>HaberId</th>
        <th>Haber Başlığı</th>
        <th>Kategori</th>
        <th>Durum</th>
        <th>Görsel</th>
        <th>Düzenle</th>
        <th>Sil</th>
        
    </tr>
    @foreach (var item in Model)
    {
        <tr>
            <th>@item.Id</th>
            <td>@item.Title</td>
            <td>@item.CategoryId</td>
            @if (item.IsActived == true)
            {
                <td><span class="btn btn-green">Aktif</span></td>
            }
            else
            {
                <td><span class="badge badge-primary">Pasif</span></td>
            }
            <td> <img src="@await Component.InvokeAsync("Image", new { FileCode = item.FileCode })" alt="" width="100" height="100"></td>
            <td><a asp-controller="Product" asp-action="Edit" asp-route-id="@item.Id" class="btn btn-warning">Düzenle</a>
            </td>

            @* burdan id alacak *@
            <td><a asp-controller="Product" asp-action="Delete" asp-route-id="@item.Id" OnClick="confirm(@item.Id)"
                    class="btn btn-danger">Sil</a></td>
        </tr>
    }
</table>
<a asp-action="Category" asp-controller="Product" class="btn btn-success">Yeni Haber Oluştur</a>

<script src="https://unpkg.com/sweetalert/dist/sweetalert.min.js"></script>
<script type="text/javascript">
    function confirm(id) {
        swal({
            title: "Silmek İstediğine emin misin?",
            text: "Bu blog silindiği zaman bir daha kurtaramayacaksınız!",
            icon: "warning",
            buttons: true,
            dangerMode: true
        }).then(function (isConfirm) {
            if (isConfirm) {
                swal("Kayıt Silindi!", {

    @* Bu alttaki işlemi denedim olmadı  *@
                    url: '@Url.Action("BlogRemove", "Blog")',
                    data: { 'id': id },

                    icon: "success"
                });
    } else {
        swal("Kayıt hala güvende");
    }
        });
    return false;
    }
</script>